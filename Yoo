-- Roblox Pet ESP + GUI script by Jamaldseller

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Workspace = game:GetService("Workspace")

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PetESPGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 220, 0, 150)
Frame.Position = UDim2.new(0, 20, 0.5, -75)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BackgroundTransparency = 0.25
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = Frame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 5)

local function createButton(text)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -10, 0, 30)
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    button.BorderSizePixel = 0
    button.TextColor3 = Color3.fromRGB(200, 200, 200)
    button.Font = Enum.Font.Gotham
    button.TextSize = 16
    button.Text = text
    button.Parent = Frame
    return button
end

local espToggle = createButton("Toggle ESP")
local level50Button = createButton("LEVEL 50") -- Useless button, does nothing

local creditLabel = Instance.new("TextLabel")
creditLabel.Size = UDim2.new(1, -10, 0, 25)
creditLabel.BackgroundTransparency = 1
creditLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
creditLabel.Font = Enum.Font.Gotham
creditLabel.TextSize = 14
creditLabel.Text = "Made by Jamaldseller"
creditLabel.TextXAlignment = Enum.TextXAlignment.Right
creditLabel.Parent = Frame

-- Variables
local espEnabled = false
local truePetMap = {}  -- Tracks pets and their ESP objects

-- Updated pet data with kitsune 1% chance
local petData = {
    ["Shiba Inu"] = {chance = 40, trait = "Every ~1 Minute, ~15% chance to dig up a random seed!"},
    ["Nihonzaru"] = {chance = 31, trait = "As long as the player has a Hot Spring in their garden: bathes in it and boosts all other pet's passives by a small amount."},
    ["Tanuki"] = {chance = 20.82, trait = "Occasionally causes mischief doing random actions in the players garden."},
    ["Tanchozuru"] = {chance = 4.6, trait = "Every 10:24m, meditates for 10.22s, nearby fruits in a 15.22 studs have a 5.11% chance every second to mutate into Tranquill."},
    ["Kappa"] = {chance = 3.5, trait = "Water Spirit: Every 8 minutes, sprays water on all fruits within 25.62 studs, applying Wet mutation. Has a 10.27% to replace Wet mutations already on fruit with Bloodlit mutation!"},
    ["Kitsune"] = {chance = 1, trait = "Nine-Tailed Myth: Every ~22 Minutes, goes to another player's fruit, mutates it with Chakra and steals (duplicate) and gives it to the player! Very Rare chance to mutate with Foxfire Chakra instead."},
}

-- Helper to create ESP objects
local function createESP(pet)
    if not pet or not pet.PrimaryPart then return end

    local box = Instance.new("BoxHandleAdornment")
    box.Name = "PetESPBox"
    box.Adornee = pet.PrimaryPart
    box.AlwaysOnTop = true
    box.ZIndex = 10
    box.Size = pet.PrimaryPart.Size + Vector3.new(1, 1, 1)
    box.Color3 = Color3.new(0, 1, 0)
    box.Transparency = 0.5
    box.Parent = pet.PrimaryPart

    local text = Instance.new("BillboardGui")
    text.Name = "PetESPText"
    text.Adornee = pet.PrimaryPart
    text.AlwaysOnTop = true
    text.Size = UDim2.new(0, 150, 0, 30)
    text.StudsOffset = Vector3.new(0, pet.PrimaryPart.Size.Y + 1.5, 0)
    text.Parent = pet.PrimaryPart

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.new(0, 1, 0)
    label.TextStrokeColor3 = Color3.new(0, 0, 0)
    label.TextStrokeTransparency = 0
    label.Font = Enum.Font.GothamBold
    label.TextSize = 14
    label.Text = pet.Name
    label.Parent = text

    return {box = box, text = text}
end

-- Remove ESP adornments safely
local function removeESP(espObjects)
    if espObjects then
        if espObjects.box then
            espObjects.box:Destroy()
        end
        if espObjects.text then
            espObjects.text:Destroy()
        end
    end
end

-- Update ESP for all tracked pets depending on espEnabled
local function updateAllESP()
    for pet, espObjects in pairs(truePetMap) do
        if espEnabled then
            if not espObjects then
                truePetMap[pet] = createESP(pet)
            end
        else
            removeESP(espObjects)
            truePetMap[pet] = nil
        end
    end
end

-- Connect to new pets spawning (assumed under Workspace.Pets folder)
local PetsFolder = Workspace:WaitForChild("Pets")

local function onPetAdded(pet)
    if espEnabled then
        -- Create ESP for new pet and track it
        truePetMap[pet] = createESP(pet)
    end
    -- Remove ESP if pet is removed
    pet.AncestryChanged:Connect(function(child, parent)
        if not parent then
            removeESP(truePetMap[pet])
            truePetMap[pet] = nil
        end
    end)
end

-- Initial setup for existing pets
for _, pet in pairs(PetsFolder:GetChildren()) do
    if espEnabled then
        truePetMap[pet] = createESP(pet)
    end
    pet.AncestryChanged:Connect(function(child, parent)
        if not parent then
            removeESP(truePetMap[pet])
            truePetMap[pet] = nil
        end
    end)
end

-- Listen for new pets added
PetsFolder.ChildAdded:Connect(onPetAdded)

-- ESP toggle button logic
espToggle.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    if espEnabled then
        -- Create ESP for all pets that currently don't have it
        for _, pet in pairs(PetsFolder:GetChildren()) do
            if not truePetMap[pet] then
                truePetMap[pet] = createESP(pet)
            end
        end
    else
        -- Remove all ESP overlays immediately
        for pet, espObjects in pairs(truePetMap) do
            removeESP(espObjects)
        end
        truePetMap = {}
    end
end)

-- LEVEL 50 button does nothing (useless)
level50Button.MouseButton1Click:Connect(function()
    -- Intentionally blank
end)

-- Cleanup on script disable or player leaving
local function cleanup()
    for pet, espObjects in pairs(truePetMap) do
        removeESP(espObjects)
    end
    truePetMap = {}
end

-- Optional: clean on player leaving or script disabling
LocalPlayer.OnLeave:Connect(cleanup)

-- Done

